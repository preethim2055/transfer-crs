<div class="main-wrapper">
  <nav class="navbar navbar-expand-lg navbar-light bg-white sticky-top shadow-sm">
    <div class="container">
      <a class="navbar-brand fw-bold text-primary fs-3" href="#">Trip<span class="text-dark">Go</span></a>
      <div class="ms-auto">
        <div class="dropdown">
          <button class="btn btn-outline-dark dropdown-toggle fw-bold" type="button" data-bs-toggle="dropdown">
            Login
          </button>
          <ul class="dropdown-menu dropdown-menu-end shadow border-0 mt-2">
            <li><a class="dropdown-item" href="#">Admin Login</a></li>
            <li><a class="dropdown-item" href="#">User Login</a></li>
          </ul>
        </div>
      </div>
    </div>
  </nav>

  <header class="hero-bg">
    <div class="container text-center text-white">
      <h1 class="display-4 fw-bold">Explore the World with TripGo</h1>
      <p class="lead opacity-75">Premium vehicle transfers at seasonal prices</p>
    </div>
  </header>

  <div class="container search-container">
    <div class="card search-card shadow-lg p-4 border-0 rounded-4">
      <div class="row g-3 align-items-end">

        <div class="col-lg-4 col-md-6 position-relative">
          <label class="form-label small fw-bold text-muted">PICKUP LOCATION</label>
          <div class="input-group">
            <span class="input-group-text bg-light border-0"><i class="bi bi-geo-alt"></i></span>
            <input type="text" class="form-control bg-light border-0" placeholder="e.g. Pune"
                   [(ngModel)]="searchParams.starting_point" (input)="getSuggestions(searchParams.starting_point, 'pickup')">
          </div>
          <ul class="list-group autosuggest-list shadow" *ngIf="pickupSuggestions.length">
            <li class="list-group-item list-group-item-action"
                *ngFor="let s of pickupSuggestions" (click)="selectCity(s.city_name, 'pickup')">
              {{s.city_name}}
            </li>
          </ul>
        </div>

        <div class="col-lg-4 col-md-6 position-relative">
          <label class="form-label small fw-bold text-muted">DROP-OFF LOCATION</label>
          <div class="input-group">
            <span class="input-group-text bg-light border-0"><i class="bi bi-geo-fill"></i></span>
            <input type="text" class="form-control bg-light border-0" placeholder="e.g. Chennai"
                   [(ngModel)]="searchParams.ending_point" (input)="getSuggestions(searchParams.ending_point, 'dropoff')">
          </div>
          <ul class="list-group autosuggest-list shadow" *ngIf="dropoffSuggestions.length">
            <li class="list-group-item list-group-item-action"
                *ngFor="let s of dropoffSuggestions" (click)="selectCity(s.city_name, 'dropoff')">
              {{s.city_name}}
            </li>
          </ul>
        </div>

        <div class="col-lg-2 col-md-6">
          <label class="form-label small fw-bold text-muted">TRAVEL DATE</label>
          <input type="date" class="form-control bg-light border-0" [(ngModel)]="searchParams.start_date">
        </div>

        <div class="col-lg-2 col-md-6">
          <button class="btn btn-primary w-100 fw-bold py-2" (click)="performSearch()" [disabled]="isSearching">
            <span *ngIf="isSearching" class="spinner-border spinner-border-sm me-2"></span>
            {{ isSearching ? 'SEARCHING...' : 'SEARCH' }}
          </button>
        </div>

      </div>
    </div>
  </div>

  <main class="container py-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h4 class="fw-bold mb-0">Available Transfers</h4>
      <span class="badge bg-light text-dark border">{{filteredRoutes.length}} Results</span>
    </div>

    <div *ngIf="filteredRoutes.length === 0 && !isSearching" class="text-center py-5">
      <i class="bi bi-car-front text-muted display-1"></i>
      <p class="text-muted mt-3">No vehicles found. Try a different route or date.</p>
    </div>

    <div *ngFor="let route of filteredRoutes" class="card mb-4 border-0 shadow-sm rounded-4 overflow-hidden vehicle-card">
      <div class="row g-0">

        <div class="col-md-3 bg-light d-flex align-items-center justify-content-center p-3">
          <img [src]="route.image" class="img-fluid rounded-3"
               style="max-height: 160px; object-fit: contain;" alt="Vehicle">
        </div>

        <div class="col-md-6 p-4">
          <!-- <div class="badge bg-primary-subtle text-primary mb-2">Instant Confirmation</div> -->

          <h5 class="fw-bold mb-1">{{ route.vehicle_name }}</h5>

          <p class="mb-3">
            <span class="badge bg-secondary-subtle text-dark">{{ route.vehicle_type_name }}</span>
          </p>

          <p class="text-muted small mb-3">
            {{route.starting_point}}
            <i class="bi bi-arrow-right mx-2 text-primary"></i>
            {{route.ending_point}}
          </p>

          <div class="d-flex gap-4 text-muted small">
            <span><i class="bi bi-people-fill me-2 text-primary"></i>Up to {{ route.max_capacity }} Pax</span>
            <span><i class="bi bi-clock-history me-2 text-primary"></i>{{route.duration_hours}}h {{route.duration_minutes}}m</span>
            <span><i class="bi bi-briefcase-fill me-2 text-primary"></i>2 Luggage</span>
          </div>
        </div>

        <div class="col-md-3 p-4 bg-light border-start text-center d-flex flex-column justify-content-center">
          <p class="text-muted small mb-0">Estimated Price</p>
          <h3 class="fw-bold text-primary mb-0">â‚¹{{route.base_price}}</h3>
          <p class="text-success x-small fw-bold mb-3">Free Cancellation</p>
          <button class="btn btn-success fw-bold rounded-pill px-4 py-2 shadow-sm" (click)="checkLoginAndBook(route)">
            BOOK NOW
          </button>
        </div>
      </div>
    </div>
  </main>
</div>